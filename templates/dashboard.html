<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>WoonRadar Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>üè† Overzicht van woningen</h1>

    <!-- üî• Nieuw: Filters voor provincie en prijs -->
    <form method="get" style="margin-bottom: 20px;">
        <label for="provincie">Filter op provincie:</label>
        <select name="provincie" id="provincie">
            <option value="">Alle provincies</option>
            <option value="Noord-Brabant" {% if selected_provincie == 'Noord-Brabant' %}selected{% endif %}>Noord-Brabant</option>
            <option value="Noord-Holland" {% if selected_provincie == 'Noord-Holland' %}selected{% endif %}>Noord-Holland</option>
            <option value="Zuid-Holland" {% if selected_provincie == 'Zuid-Holland' %}selected{% endif %}>Zuid-Holland</option>
            <option value="Gelderland" {% if selected_provincie == 'Gelderland' %}selected{% endif %}>Gelderland</option>
            <option value="Overijssel" {% if selected_provincie == 'Overijssel' %}selected{% endif %}>Overijssel</option>
        </select>

        <label for="sortering">Sorteer op:</label>
        <select name="sortering" id="sortering">
            <option value="">Standaard</option>
            <option value="prijs_asc" {% if selected_sortering == 'prijs_asc' %}selected{% endif %}>Prijs laag-hoog</option>
        </select>

        <button type="submit">Filter toepassen</button>
    </form>

    {% if houses %}
        <table>
            <thead>
                <tr>
                    <th>Titel</th>
                    <th>Prijs</th>
                    <th>Adres</th>
                    <th>Oppervlakte</th>
                    <th>Energielabel</th>
                    <th>Tuin/Terras</th>
                    <th>Afbeelding</th>
                    <th>Provider</th>
                    <th>Datum</th>
                    <th>Link</th>
                </tr>
            </thead>
            <tbody>
                {% for h in houses %}
                <tr>
                    <td>{{ h.title or "Onbekend" }}</td>
                    <td>
                        {% if h.price %}
                            ‚Ç¨ {{ "{:,}".format(h.price).replace(",", ".") }}
                        {% else %}
                            Onbekend
                        {% endif %}
                    </td>
                    <td>{{ h.address or "Onbekend" }}</td>
                    <td>{{ h.size or "?" }} m¬≤</td>
                    <td>{{ h.energy_label or "Onbekend" }}</td>
                    <td>{{ h.garden_terrace or "Onbekend" }}</td>
                    <td>
                        {% if h.image_url %}
                            <img src="{{ h.image_url }}" alt="foto" style="width:100px;">
                        {% else %}
                            Geen afbeelding
                        {% endif %}
                    </td>
                    <td>{{ h.provider or "Onbekend" }}</td>
                    <td>{{ h.date_scraped or "?" }}</td>
                    <td>
                        {% if h.link %}
                            <a href="{{ h.link }}" target="_blank">Bekijk</a>
                        {% else %}
                            Geen link
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p style="text-align:center;">Geen woningen gevonden.</p>
    {% endif %}
</body>
</html>
